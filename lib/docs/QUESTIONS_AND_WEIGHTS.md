# ุฏููู ุจูุงุก ุงูุฃุณุฆูุฉ ูุฑุจุท ุงูุฎูุงุฑุงุช ุจุงูุฃูุฒุงู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุชูุญ ูุฐุง ุงููุธุงู ุฅุถุงูุฉ ุฃุณุฆูุฉ ูุน ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ ูุฑุจุท ูู ุฎูุงุฑ ุจุฃูุฒุงู ูุฎุชููุฉ ููุชุฎุตุตุงุช ุงูููุฏุณูุฉ. ุนูุฏ ุฅุฌุงุจุฉ ุงูุทุงูุจ ุนูู ุงูุฃุณุฆูุฉุ ูุชู ุญุณุงุจ ุงููุชูุฌุฉ ุจูุงุกู ุนูู ุงูุฃูุฒุงู ุงููุฑุชุจุทุฉ ุจูู ุฎูุงุฑ.

---

## ๐๏ธ ุจููุฉ ุงููุธุงู

### 1. ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู `questions`
```sql
CREATE TABLE questions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  questionText TEXT NOT NULL,
  option1 TEXT NOT NULL,
  option2 TEXT NOT NULL,
  option3 TEXT NOT NULL,
  option4 TEXT NOT NULL,
  majorId INTEGER NOT NULL
)
```

#### ุฌุฏูู `question_weights`
```sql
CREATE TABLE question_weights (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  questionId INTEGER NOT NULL,
  majorId INTEGER NOT NULL,
  optionIndex INTEGER NOT NULL,
  weight INTEGER NOT NULL DEFAULT 0,
  FOREIGN KEY (questionId) REFERENCES questions (id),
  FOREIGN KEY (majorId) REFERENCES majors (id)
)
```

**ุดุฑุญ ุงูุญููู:**
- `questionId`: ูุนุฑู ุงูุณุคุงู
- `majorId`: ูุนุฑู ุงูุชุฎุตุต
- `optionIndex`: ููุฑุณ ุงูุฎูุงุฑ (0, 1, 2, 3) ููุฎูุงุฑุงุช ุงูุฃุฑุจุนุฉ
- `weight`: ูููุฉ ุงููุฒู (ุนุงุฏุฉ 0, 1, 2ุ ุญูุซ 2 = ูุฒู ุนุงููุ 1 = ูุฒู ูุชูุณุทุ 0 = ูุง ููุฌุฏ ูุฒู)

---

## ๐ ุขููุฉ ุงูุนูู

### 1. ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ

ุนูุฏ ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏุ ูุชู ุงุชุจุงุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:

1. **ุญูุธ ุงูุณุคุงู ูู ุฌุฏูู `questions`**
   ```dart
   final questionModel = QuestionModel(
     questionText: "ูุง ูู ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ ุงูุชู ุชูุถู ุงูุนูู ุนูููุงุ",
     option1: "ุงูุฑูุงุถูุงุช ูุงูุชุญููู",
     option2: "ุงูููุฒูุงุก ูุงูุงููุชุฑูููุงุช",
     option3: "ุงูุชุตููู ูุงูุฅุจุฏุงุน",
     option4: "ุงูุฅุฏุงุฑุฉ ูุงูุชุฎุทูุท",
     majorId: 1, // ูููุฉ ุงูุชุฑุงุถูุฉ
   );
   final questionId = await DatabaseService.instance.insertQuestion(questionModel);
   ```

2. **ุญูุธ ุงูุฃูุฒุงู ูู ุฌุฏูู `question_weights`**
   ```dart
   // ููู ุฎูุงุฑุ ููู ุชุฎุตุตุ ุงุญูุธ ุงููุฒู
   for (int optionIndex = 0; optionIndex < 4; optionIndex++) {
     for (var major in majors) {
       final weight = getWeightForOption(optionIndex, major.id);
       if (weight > 0) {
         await DatabaseService.instance.insertQuestionWeight(
           questionId,
           major.id,
           optionIndex,
           weight,
         );
       }
     }
   }
   ```

### 2. ุชุนุฏูู ุณุคุงู ููุฌูุฏ

ุนูุฏ ุชุนุฏูู ุณุคุงูุ ูุชู:

1. **ุชุญุฏูุซ ุงูุณุคุงู ูู ุฌุฏูู `questions`**
2. **ุญุฐู ุฌููุน ุงูุฃูุฒุงู ุงููุฏููุฉ**
   ```dart
   await DatabaseService.instance.deleteQuestionWeights(questionId);
   ```
3. **ุฅุฏุฎุงู ุงูุฃูุฒุงู ุงูุฌุฏูุฏุฉ**

### 3. ุญุณุงุจ ุงููุชูุฌุฉ

ุนูุฏ ุฅุฌุงุจุฉ ุงูุทุงูุจ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ:

1. **ุฌูุน ุงูุฃูุฒุงู ููู ุชุฎุตุต**
   ```dart
   final scores = await DatabaseService.instance.calculateScores(answers);
   // scores = {majorId1: totalWeight1, majorId2: totalWeight2, ...}
   ```

2. **ุชุฑุชูุจ ุงูุชุฎุตุตุงุช ุญุณุจ ุงููุฒู**
   ```dart
   final sortedMajors = allMajors.map((major) {
     final score = scores[major.id] ?? 0;
     return MapEntry(major, score);
   }).toList()
     ..sort((a, b) => b.value.compareTo(a.value));
   ```

3. **ุงุฎุชูุงุฑ ุงูุชุฎุตุตูู ุงูุฃุนูู ููุงุทุงู**

---

## ๐ ูุซุงู ุนููู: ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ

### ุงูุณุคุงู:
"ูุง ูู ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ ุงูุชู ุชูุถู ุงูุนูู ุนูููุงุ"

### ุงูุฎูุงุฑุงุช:
1. ุงูุฑูุงุถูุงุช ูุงูุชุญููู
2. ุงูููุฒูุงุก ูุงูุงููุชุฑูููุงุช
3. ุงูุชุตููู ูุงูุฅุจุฏุงุน
4. ุงูุฅุฏุงุฑุฉ ูุงูุชุฎุทูุท

### ุฑุจุท ุงูุฎูุงุฑุงุช ุจุงูุฃูุฒุงู:

#### ุงูุฎูุงุฑ 1: "ุงูุฑูุงุถูุงุช ูุงูุชุญููู"
- ุงูููุฏุณุฉ ุงููุฏููุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ุงูููุฏุณุฉ ุงููููุงููููุฉ: ูุฒู 1 (ุนูุงูุฉ ูุชูุณุทุฉ)
- ุงูููุฏุณุฉ ุงูููุฑุจุงุฆูุฉ: ูุฒู 1 (ุนูุงูุฉ ูุชูุณุทุฉ)
- ุงูููุฏุณุฉ ุงูุตูุงุนูุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ุจุงูู ุงูุชุฎุตุตุงุช: ูุฒู 0

#### ุงูุฎูุงุฑ 2: "ุงูููุฒูุงุก ูุงูุงููุชุฑูููุงุช"
- ุงูููุฏุณุฉ ุงูููุฑุจุงุฆูุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ุงูููุฏุณุฉ ุงููููุงููููุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ููุฏุณุฉ ุงูุทุงูุฉ ุงููุชุฌุฏุฏุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ุจุงูู ุงูุชุฎุตุตุงุช: ูุฒู 0

#### ุงูุฎูุงุฑ 3: "ุงูุชุตููู ูุงูุฅุจุฏุงุน"
- ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ุงูููุฏุณุฉ ุงููุฏููุฉ: ูุฒู 1 (ุนูุงูุฉ ูุชูุณุทุฉ)
- ุจุงูู ุงูุชุฎุตุตุงุช: ูุฒู 0

#### ุงูุฎูุงุฑ 4: "ุงูุฅุฏุงุฑุฉ ูุงูุชุฎุทูุท"
- ุงูููุฏุณุฉ ุงูุตูุงุนูุฉ: ูุฒู 2 (ุนูุงูุฉ ูููุฉ)
- ุจุงูู ุงูุชุฎุตุตุงุช: ูุฒู 0

### ููุฏ ุงูุฅุถุงูุฉ:

```dart
// 1. ุญูุธ ุงูุณุคุงู
final questionModel = QuestionModel(
  questionText: "ูุง ูู ุงูููุงุฏ ุงูุฏุฑุงุณูุฉ ุงูุชู ุชูุถู ุงูุนูู ุนูููุงุ",
  option1: "ุงูุฑูุงุถูุงุช ูุงูุชุญููู",
  option2: "ุงูููุฒูุงุก ูุงูุงููุชุฑูููุงุช",
  option3: "ุงูุชุตููู ูุงูุฅุจุฏุงุน",
  option4: "ุงูุฅุฏุงุฑุฉ ูุงูุชุฎุทูุท",
  majorId: 1,
);
final questionId = await DatabaseService.instance.insertQuestion(questionModel);

// 2. ุญูุธ ุงูุฃูุฒุงู ููุฎูุงุฑ 1
await DatabaseService.instance.insertQuestionWeight(questionId, 1, 0, 2); // ูุฏููุฉ
await DatabaseService.instance.insertQuestionWeight(questionId, 2, 0, 1); // ูููุงููููุฉ
await DatabaseService.instance.insertQuestionWeight(questionId, 3, 0, 1); // ููุฑุจุงุฆูุฉ
await DatabaseService.instance.insertQuestionWeight(questionId, 4, 0, 2); // ุตูุงุนูุฉ

// 3. ุญูุธ ุงูุฃูุฒุงู ููุฎูุงุฑ 2
await DatabaseService.instance.insertQuestionWeight(questionId, 3, 1, 2); // ููุฑุจุงุฆูุฉ
await DatabaseService.instance.insertQuestionWeight(questionId, 2, 1, 2); // ูููุงููููุฉ
await DatabaseService.instance.insertQuestionWeight(questionId, 6, 1, 2); // ุทุงูุฉ ูุชุฌุฏุฏุฉ

// 4. ุญูุธ ุงูุฃูุฒุงู ููุฎูุงุฑ 3
await DatabaseService.instance.insertQuestionWeight(questionId, 7, 2, 2); // ูุนูุงุฑูุฉ
await DatabaseService.instance.insertQuestionWeight(questionId, 1, 2, 1); // ูุฏููุฉ

// 5. ุญูุธ ุงูุฃูุฒุงู ููุฎูุงุฑ 4
await DatabaseService.instance.insertQuestionWeight(questionId, 4, 3, 2); // ุตูุงุนูุฉ
```

---

## ๐ฏ ุงุณุชุฑุงุชูุฌูุฉ ุชุญุฏูุฏ ุงูุฃูุฒุงู

### ูุนุงููุฑ ุชุญุฏูุฏ ุงูุฃูุฒุงู:

1. **ูุฒู 2 (ุนุงูู):** ุนูุฏูุง ูููู ุงูุฎูุงุฑ ูุฑุชุจุทุงู ุงุฑุชุจุงุทุงู ูุซููุงู ุจุงูุชุฎุตุต
   - ูุซุงู: ุฎูุงุฑ "ุชุตููู ูุจุงูู" โ ุงูููุฏุณุฉ ุงููุฏููุฉ (ูุฒู 2)

2. **ูุฒู 1 (ูุชูุณุท):** ุนูุฏูุง ูููู ุงูุฎูุงุฑ ูุฑุชุจุทุงู ุจุดูู ุฌุฒุฆู ุจุงูุชุฎุตุต
   - ูุซุงู: ุฎูุงุฑ "ุงูุฑูุงุถูุงุช" โ ุงูููุฏุณุฉ ุงูููุฑุจุงุฆูุฉ (ูุฒู 1)

3. **ูุฒู 0 (ูุง ููุฌุฏ):** ุนูุฏูุง ูุง ูููู ููุงู ุนูุงูุฉ ุจูู ุงูุฎูุงุฑ ูุงูุชุฎุตุต
   - ูุซุงู: ุฎูุงุฑ "ุงูุชุตููู" โ ููุฏุณุฉ ุงูุชุนุฏูู (ูุฒู 0)

### ูุตุงุฆุญ:

- **ูุง ุชุถุน ูุฒู 2 ูุฌููุน ุงูุชุฎุตุตุงุช ูู ุฎูุงุฑ ูุงุญุฏ:** ูุฐุง ูุฌุนู ุงูุงุฎุชุจุงุฑ ุบูุฑ ุฏููู
- **ูุงุฒู ุงูุฃูุฒุงู:** ุชุฃูุฏ ูู ุฃู ูู ุฎูุงุฑ ูู ุชุฎุตุต ูุงุญุฏ ุนูู ุงูุฃูู ุจูุฒู 2
- **ุงุฎุชุจุฑ ุงููุชุงุฆุฌ:** ุจุนุฏ ุฅุถุงูุฉ ุณุคุงูุ ุงุฎุชุจุฑ ุงูุงุฎุชุจุงุฑ ูุชุญูู ูู ุตุญุฉ ุงููุชุงุฆุฌ

---

## ๐ ููููุฉ ุนุฑุถ ุงูุฃูุฒุงู

ูู ููุญุฉ ุงูุชุญููุ ููููู:

1. **ุนุฑุถ ุฌููุน ุงูุฃุณุฆูุฉ:** ุงุฐูุจ ุฅูู "ุฅุฏุงุฑุฉ ุงูุฃุณุฆูุฉ"
2. **ุชุนุฏูู ุณุคุงู:** ุงุถุบุท ุนูู ุฒุฑ ุงูุชุนุฏูู
3. **ุนุฑุถ ุงูุฃูุฒุงู:** ุณุชุธูุฑ ุงูุฃูุฒุงู ููู ุฎูุงุฑ ุชุญุช ุงุณู ูู ุชุฎุตุต
4. **ุชุนุฏูู ุงูุฃูุฒุงู:** ุบููุฑ ุงููููุฉ ูู ุญูู "ุงููุฒู" ุซู ุงุญูุธ

---

## ๐ ูุซุงู ุญุณุงุจ ุงููุชูุฌุฉ

### ุงูุฃุณุฆูุฉ ูุงูุฅุฌุงุจุงุช:
- ุงูุณุคุงู 1: ุงูุฎูุงุฑ 1 (ุงูุฑูุงุถูุงุช) โ ูุฒู 2 ูููุฏููุฉุ ูุฒู 1 ูููููุงููููุฉ
- ุงูุณุคุงู 2: ุงูุฎูุงุฑ 2 (ุงูููุฒูุงุก) โ ูุฒู 2 ููููุฑุจุงุฆูุฉุ ูุฒู 2 ูููููุงููููุฉ
- ุงูุณุคุงู 3: ุงูุฎูุงุฑ 3 (ุงูุชุตููู) โ ูุฒู 2 ูููุนูุงุฑูุฉ

### ุงููุชูุฌุฉ:
- ุงูููุฏุณุฉ ุงููุฏููุฉ: 2 (ูู ุงูุณุคุงู 1)
- ุงูููุฏุณุฉ ุงููููุงููููุฉ: 1 + 2 = 3 (ูู ุงูุณุคุงู 1 ู 2)
- ุงูููุฏุณุฉ ุงูููุฑุจุงุฆูุฉ: 2 (ูู ุงูุณุคุงู 2)
- ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ: 2 (ูู ุงูุณุคุงู 3)

**ุงูุชุฑุชูุจ:** ุงููููุงููููุฉ (3) > ุงููุฏููุฉ (2) = ุงูููุฑุจุงุฆูุฉ (2) = ุงููุนูุงุฑูุฉ (2)

---

## โ ุงูุฎูุงุตุฉ

ูุธุงู ุงูุฃูุฒุงู ูุณูุญ ุจุฅูุดุงุก ุงุฎุชุจุงุฑ ุฏููู ูุฑุจุท ุฅุฌุงุจุงุช ุงูุทุงูุจ ุจุงูุชุฎุตุตุงุช ุงูููุงุณุจุฉ. ุนูุฏ ุฅุถุงูุฉ ุณุคุงู ุฌุฏูุฏ:

1. ุฃุถู ุงูุณุคุงู ูุน 4 ุฎูุงุฑุงุช
2. ุญุฏุฏ ุงูุฃูุฒุงู ููู ุฎูุงุฑ ููู ุชุฎุตุต
3. ุงุฎุชุจุฑ ุงููุชูุฌุฉ ููุชุฃูุฏ ูู ุตุญุชูุง
4. ุงุญูุธ ุงูุชุบููุฑุงุช

ููุญุตูู ุนูู ุฃูุถู ุงููุชุงุฆุฌุ ุชุฃูุฏ ูู:
- ุฑุจุท ูู ุฎูุงุฑ ุจุชุฎุตุต ูุงุญุฏ ุนูู ุงูุฃูู ุจูุฒู ุนุงูู (2)
- ุชูุฒูุน ุงูุฃูุฒุงู ุจุดูู ูุชูุงุฒู
- ุงุฎุชุจุงุฑ ุงููุชุงุฆุฌ ุจุนุฏ ุฅุถุงูุฉ ุฃู ุณุคุงู ุฌุฏูุฏ

